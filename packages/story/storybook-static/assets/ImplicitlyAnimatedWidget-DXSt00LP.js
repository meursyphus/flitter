var h=Object.defineProperty;var m=(a,t,e)=>t in a?h(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var u=(a,t,e)=>(m(a,typeof t!="symbol"?t+"":t,e),e);import{l as p,e as w,a as b,b as I,c as f,d as O,f as v,g,h as T,i as A,j as S,k,m as C,n as x,o as c,A as E}from"./AnimationController-DtlgA-dx.js";import{G as U,H as W,I as y}from"./Widget-Dxvrat1N.js";class r{constructor(t){u(this,"transfromInternal");this.transfromInternal=t}transform(t){return U(t>=0&&t<=1,"parametric value $t is outside of [0, 1] range."),this.transfromInternal(t)}}const s={linear:p,easeIn:w,easeInOut:b,easeOut:I,circIn:f,circInOut:O,circOut:v,backIn:g,backInOut:T,backOut:A,anticipate:S,bounceIn:k,bounceInOut:C,bounceOut:x},d={linear:new r(s.linear),easeIn:new r(s.easeIn),easeInOut:new r(s.easeInOut),easeOut:new r(s.easeOut),circIn:new r(s.circIn),circInOut:new r(s.circInOut),circOut:new r(s.circInOut),backIn:new r(s.backIn),backInOut:new r(s.backInOut),backOut:new r(s.backOut),anticipate:new r(s.anticipate),bounceIn:new r(s.bounceIn),bounceInOut:new r(s.bounceInOut),bounceOut:new r(s.bounceOut)};class _{transform(t){throw new Error("transform must be implemented")}evaluate(t){return this.transform(t.value)}animated(t){return new j({parent:t,animatable:this})}}class j extends c{constructor({animatable:e,parent:n}){super();u(this,"parent");u(this,"animatable");this.parent=n,this.animatable=e}get value(){return this.animatable.evaluate(this.parent)}}class L extends _{constructor({begin:e,end:n}){super();u(this,"begin");u(this,"end");this.begin=e,this.end=n??e}transform(e){return e===0?this.begin:e===1?this.end:this.lerp(e)}lerp(e){const{begin:n}=this;if(typeof n=="number"){const i=this.end;return n+(i-n)*e}else throw new Error("not implemented lerp on tween")}}class q extends c{constructor({parent:e,curve:n=d.linear}){super();u(this,"parent");u(this,"curve");this.parent=e,this.curve=n}get value(){return this.curve.transform(this.parent.value)}dispose(){}}class $ extends W{constructor({key:e,curve:n=d.linear,duration:i}){super(e);u(this,"curve");u(this,"duration");this.curve=n,this.duration=i}createState(){return new l}}class l extends y{constructor(){super();u(this,"controller");u(this,"animation")}initState(e){super.initState(e),this.controller=new E({duration:this.widget.duration}),this.animation=this.createCurve(),this.constructTweens(),this.didUpdateTweens()}didUpdateWidget(e){super.didUpdateWidget(e),this.widget.curve!==e.curve&&(this.animation.dispose(),this.animation=this.createCurve()),this.controller.duration=this.widget.duration,this.constructTweens()&&(this.controller.reset(),this.controller.forward(),this.didUpdateTweens())}createCurve(){var e;return new q({curve:(e=this.widget)==null?void 0:e.curve,parent:this.controller})}constructTweens(){let e=!1;return this.forEachTween(({tween:n,targetValue:i,constructor:o})=>i==null?null:n==null?o(i):(this.shouldAnimateTween(n,i)&&(e=!0,this.updateTween(n,i)),n)),e}updateTween(e,n){e.begin=e.evaluate(this.animation),e.end=n}shouldAnimateTween(e,n){const{end:i}=e;if(typeof i=="number")return i!==n;{const o=n;return!i.equals(o)}}didUpdateTweens(){}forEachTween(e){throw new Error("forEachTween must be implemented")}dispose(){super.dispose(),this.controller.dispose()}}class z extends l{initState(t){super.initState(t),this.controller.addListener(()=>{this.handleChange()})}handleChange(){this.setState(()=>{})}}export{z as A,d as C,$ as I,L as T};
