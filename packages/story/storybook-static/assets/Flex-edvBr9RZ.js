var S=Object.defineProperty;var p=(t,c,i)=>c in t?S(t,c,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[c]=i;var h=(t,c,i)=>(p(t,typeof c!="symbol"?c+"":c,i),i);import{K as O,N,Q as d,x as _,O as v,b as f,g as C,R as w}from"./Widget-Dxvrat1N.js";var g=(t=>(t.min="min",t.max="max",t))(g||{}),u=(t=>(t.up="up",t.down="down",t))(u||{}),z=(t=>(t.start="start",t.end="end",t.center="center",t.spaceBetween="spaceBetween",t.spaceAround="spaceAround",t.spaceEvenly="spaceEvenly",t))(z||{}),x=(t=>(t.start="start",t.end="end",t.center="center",t.stretch="stretch",t))(x||{}),k=(t=>(t.horizontal="horizontal",t.vertical="vertical",t))(k||{});let b=class extends O{constructor({children:i,direction:e,mainAxisAlignment:r=z.start,crossAxisAlignment:n=x.center,verticalDirection:s=u.down,mainAxisSize:o=g.max,key:a}){super({children:i,key:a});h(this,"direction");h(this,"mainAxisAlignment");h(this,"crossAxisAlignment");h(this,"verticalDirection");h(this,"mainAxisSize");this.direction=e,this.mainAxisAlignment=r,this.crossAxisAlignment=n,this.verticalDirection=s,this.mainAxisSize=o}createRenderObject(){return new y({direction:this.direction,mainAxisAlignment:this.mainAxisAlignment,crossAxisAlignment:this.crossAxisAlignment,verticalDirection:this.verticalDirection,mainAxisSize:this.mainAxisSize})}updateRenderObject(i){i.direction=this.direction,i.mainAxisAlignment=this.mainAxisAlignment,i.crossAxisAlignment=this.crossAxisAlignment,i.verticalDirection=this.verticalDirection,i.mainAxisSize=this.mainAxisSize}};class y extends N{constructor({direction:i,mainAxisAlignment:e,crossAxisAlignment:r,verticalDirection:n,mainAxisSize:s}){super({isPainter:!1});h(this,"_direction");h(this,"_mainAxisAlignment");h(this,"_crossAxisAlignment");h(this,"_verticalDirection");h(this,"_mainAxisSize");this._direction=i,this._mainAxisAlignment=e,this._crossAxisAlignment=r,this._verticalDirection=n,this._mainAxisSize=s}get direction(){return this._direction}set direction(i){this._direction!==i&&(this._direction=i)}get mainAxisAlignment(){return this._mainAxisAlignment}set mainAxisAlignment(i){this._mainAxisAlignment!==i&&(this._mainAxisAlignment=i,this.markNeedsLayout())}get crossAxisAlignment(){return this._crossAxisAlignment}set crossAxisAlignment(i){this._crossAxisAlignment!==i&&(this._crossAxisAlignment=i,this.markNeedsLayout())}get verticalDirection(){return this._verticalDirection}set verticalDirection(i){this._verticalDirection!==i&&(this._verticalDirection=i,this.markNeedsLayout())}get mainAxisSize(){return this._mainAxisSize}set mainAxisSize(i){this._mainAxisSize!==i&&(this._mainAxisSize=i,this.markNeedsLayout())}get mainAxisSizeName(){return this.direction==="horizontal"?"width":"height"}get crossAxisSizeName(){return this.direction==="horizontal"?"height":"width"}get minMainAxisSizeName(){return this.direction==="horizontal"?"minWidth":"minHeight"}get maxMainAxisSizeName(){return this.direction==="horizontal"?"maxWidth":"maxHeight"}get minCrossAxisSizeName(){return this.direction==="horizontal"?"minHeight":"minWidth"}get maxCrossAxisSizeName(){return this.direction==="horizontal"?"maxHeight":"maxWidth"}preformLayout(){let i=0,[e,r]=[0,0];const n=this.verticalDirection==="down"?this.children:[...this.children].reverse();n.forEach(a=>{a.layout(this.constraints.loosen());const m=a instanceof d?a.flex:0;i+=m,m===0&&(e+=a.size[this.mainAxisSizeName]),r=this.crossAxisAlignment==="stretch"?this.constraints.getMax(this.crossAxisSizeName):Math.max(r,a.size[this.crossAxisSizeName])});const s=(this.constraints.getMax(this.mainAxisSizeName)-e)/i;n.forEach(a=>{let m;if(!(a instanceof d))m=this.getNonFlexItemConstraint(r);else{const l=a.flex*s;m=this.getFlexItemConstraint(l,a.fit)}a.layout(m.enforce(this.constraints.loosen()))}),this.size=this.constraints.constrain(new _({[this.mainAxisSizeName]:this.mainAxisSize==="max"?this.constraints.getMax(this.mainAxisSizeName):n.map(a=>a.size[this.mainAxisSizeName]).reduce((a,m)=>a+m,0),[this.crossAxisSizeName]:r}));const o=this.getChildOffsetsOnMainAxis(n.map(({size:a})=>a[this.mainAxisSizeName]));n.forEach((a,m)=>{const[A,l]=this.direction==="horizontal"?["x","y"]:["y","x"];a.offset=new v({[A]:o[m],[l]:this.getChildOffsetOnCrossAxis(a.size[this.crossAxisSizeName])})})}getNonFlexItemConstraint(i){return this.crossAxisAlignment===x.stretch?f.tightFor({[this.crossAxisSizeName]:i}):this.constraints.loosen()}getFlexItemConstraint(i,e){return new f({[this.minCrossAxisSizeName]:this.crossAxisAlignment==="stretch"?this.constraints[this.maxCrossAxisSizeName]:0,[this.maxCrossAxisSizeName]:this.constraints[this.maxCrossAxisSizeName],[this.maxMainAxisSizeName]:i,[this.minMainAxisSizeName]:e==="tight"?i:0})}getChildOffsetsOnMainAxis(i){let e=[];const r=(s,o)=>s+o,n=this.size[this.mainAxisSizeName]-i.reduce(r,0);switch(this.mainAxisAlignment){case"start":e=this._getChildOffsetsOnMainAxis({startOffset:0,additionalSpace:0,childMainAxisValues:i});break;case"end":e=this._getChildOffsetsOnMainAxis({startOffset:n,additionalSpace:0,childMainAxisValues:i});break;case"spaceAround":const s=n/i.length;e=this._getChildOffsetsOnMainAxis({startOffset:s/2,additionalSpace:s,childMainAxisValues:i});break;case"spaceBetween":e=this._getChildOffsetsOnMainAxis({startOffset:0,additionalSpace:n/(i.length-1),childMainAxisValues:i});break;case"spaceEvenly":const o=n/(i.length+1);e=this._getChildOffsetsOnMainAxis({startOffset:o,additionalSpace:o,childMainAxisValues:i});break;case"center":e=this._getChildOffsetsOnMainAxis({startOffset:n/2,additionalSpace:0,childMainAxisValues:i});break;default:throw new Error(`this mainAixsAlignment(${this.mainAxisAlignment}) is not supported yet`)}return e}_getChildOffsetsOnMainAxis({startOffset:i,childMainAxisValues:e,additionalSpace:r}){const n=[];let s=i;return e.forEach(o=>{n.push(s),s+=o+r}),n}getChildOffsetOnCrossAxis(i){const e=this.size[this.crossAxisSizeName];let r;switch(this.crossAxisAlignment){case x.center:r=(e-i)/2;break;case x.start:r=0;break;case x.end:r=e-i;break;case x.stretch:r=0;break}return r}getIntrinsicHeight(i){const e=(s,o)=>s+o,r=(s,o)=>Math.max(s,o),n=this.children.map(s=>s.getIntrinsicHeight(i));return this.direction==="horizontal"?n.reduce(r,0):n.reduce(e,0)}getIntrinsicWidth(i){const e=(s,o)=>s+o,r=(s,o)=>Math.max(s,o),n=this.children.map(s=>s.getIntrinsicWidth(i));return this.direction==="vertical"?n.reduce(r,0):n.reduce(e,0)}}function R({children:t,mainAxisAlignment:c,crossAxisAlignment:i,direction:e,clipped:r=!1,verticalDirection:n,mainAxisSize:s,key:o}){return C({clipped:r,key:o,clipper:a=>w.fromLTWH({left:0,top:0,width:a.width,height:a.height}),child:new b({key:o,children:t,direction:e,verticalDirection:n,mainAxisSize:s,mainAxisAlignment:c,crossAxisAlignment:i})})}export{k as A,x as C,R as F,g as M,u as V,z as a};
